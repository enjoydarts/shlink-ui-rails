<!-- „Ç¢„Ç´„Ç¶„É≥„ÉàÂâäÈô§Á¢∫Ë™ç„É¢„Éº„ÉÄ„É´ -->
<div data-controller="account-delete" 
     data-account-delete-is-oauth-user-value="<%= @user.from_omniauth? %>"
     class="fixed inset-0 z-50 hidden"
     data-account-delete-target="modal">
  
  <!-- „Éê„ÉÉ„ÇØ„Éâ„É≠„ÉÉ„Éó -->
  <div data-account-delete-target="backdrop"
       data-action="click->account-delete#backdropClick"
       class="fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300"
       style="opacity: 0;"></div>
  
  <!-- „É¢„Éº„ÉÄ„É´„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
  <div class="fixed inset-0 flex items-center justify-center p-4">
    <div data-account-delete-target="content"
         class="bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 transform transition-all duration-300" 
         style="transform: scale(0.95); opacity: 0;">
      
      <!-- „Éò„ÉÉ„ÉÄ„Éº -->
      <div class="flex items-center justify-between p-6 border-b border-gray-100">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">
            <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900"><%= t('accounts.danger_zone.delete_account_title') %></h3>
        </div>
        <button data-action="click->account-delete#closeModal"
                class="text-gray-400 hover:text-gray-600 transition-colors duration-200">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      
      <!-- „Éú„Éá„Ç£ -->
      <div class="p-6">
        <!-- „Ç¢„Ç´„Ç¶„É≥„ÉàÊÉÖÂ†±Ë°®Á§∫ -->
        <div class="mb-4">
          <p class="text-gray-600 mb-2">‰ª•‰∏ã„ÅÆ„Ç¢„Ç´„Ç¶„É≥„Éà„ÇíÂâäÈô§„Åó„Çà„ÅÜ„Å®„Åó„Å¶„ÅÑ„Åæ„ÅôÔºö</p>
          <div class="bg-gray-50 rounded-lg p-3 border">
            <div class="flex items-center space-x-3">
              <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-bold shrink-0">
                <%= @user.display_name.first.upcase %>
              </div>
              <div>
                <p class="font-semibold text-gray-900"><%= @user.display_name %></p>
                <p class="text-sm text-gray-600"><%= @user.email %></p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Ë≠¶Âëä„É°„ÉÉ„Çª„Éº„Ç∏ -->
        <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">
          <div class="flex items-start space-x-3">
            <svg class="w-5 h-5 text-red-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
            </svg>
            <div>
              <h4 class="text-sm font-medium text-red-800 mb-1"><%= t('accounts.danger_zone.delete_warning_title') %></h4>
              <ul class="text-sm text-red-700 space-y-1">
                <li>‚Ä¢ <%= t('accounts.danger_zone.delete_warning_items.data_loss') %></li>
                <li>‚Ä¢ <%= t('accounts.danger_zone.delete_warning_items.url_deletion') %></li>
                <li>‚Ä¢ <%= t('accounts.danger_zone.delete_warning_items.irreversible') %></li>
                <li>‚Ä¢ <%= t('accounts.danger_zone.delete_warning_items.reregistration') %></li>
              </ul>
            </div>
          </div>
        </div>

        <!-- ÂâäÈô§Á¢∫Ë™ç„Éï„Ç©„Éº„É† -->
        <%= form_with model: @user, url: registration_path(resource_name), local: true, html: { method: :delete }, class: "space-y-4" do |f| %>
          <% if @user.from_omniauth? %>
            <!-- OAuth „É¶„Éº„Ç∂„ÉºÔºö„ÉÜ„Ç≠„Çπ„ÉàÁ¢∫Ë™ç -->
            <div>
              <%= f.label :delete_confirmation, "üîë #{t('accounts.danger_zone.oauth_delete_confirmation')}", class: "block text-sm font-medium text-gray-700 mb-2" %>
              <%= f.text_field :delete_confirmation, 
                    data: { account_delete_target: "confirmationField" },
                    placeholder: t('accounts.danger_zone.oauth_delete_placeholder'),
                    class: "w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all duration-200" %>
              <p class="mt-1 text-sm text-gray-500"><%= t('accounts.danger_zone.oauth_delete_help') %></p>
            </div>
          <% else %>
            <!-- ÈÄöÂ∏∏„É¶„Éº„Ç∂„ÉºÔºö„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç -->
            <div>
              <%= f.label :current_password, "üîë #{t('accounts.danger_zone.current_password_delete')}", class: "block text-sm font-medium text-gray-700 mb-2" %>
              <%= f.password_field :current_password, 
                    data: { account_delete_target: "passwordField" },
                    autocomplete: "current-password",
                    placeholder: t('accounts.danger_zone.current_password_delete_placeholder'),
                    class: "w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all duration-200" %>
              <p class="mt-1 text-sm text-gray-500"><%= t('accounts.danger_zone.current_password_delete_help') %></p>
            </div>
          <% end %>
        <% end %>
      </div>
      
      <!-- „Éï„ÉÉ„Çø„Éº -->
      <div class="flex items-center justify-end space-x-3 px-6 py-4 bg-gray-50 rounded-b-2xl">
        <button data-account-delete-target="cancelButton"
                data-action="click->account-delete#closeModal"
                class="px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200 font-medium">
          „Ç≠„É£„É≥„Çª„É´
        </button>
        <button data-account-delete-target="confirmButton"
                data-action="click->account-delete#confirmDelete"
                class="px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed">
          „Ç¢„Ç´„Ç¶„É≥„Éà„ÇíÂâäÈô§„Åô„Çã
        </button>
      </div>
    </div>
  </div>
</div>