<!-- System設定 -->
<% if @settings_by_category['system'] %>
  <div class="card p-6">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold text-gray-900">⚙️ System設定</h2>
      <div class="flex space-x-2">
        <button type="button" onclick="resetCategory('system')"
                class="bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm">
          リセット
        </button>
      </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          サイトURL
        </label>
        <% site_url = @settings_by_category['system']['system.site_url'] %>
        <%= form.url_field "settings[system.site_url]", 
            value: site_url&.value,
            placeholder: "https://example.com",
            class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          サイト名
        </label>
        <% site_name = @settings_by_category['system']['system.site_name'] %>
        <%= form.text_field "settings[system.site_name]", 
            value: site_name&.value,
            placeholder: "短縮URLサービス",
            class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          タイムゾーン
        </label>
        <% timezone = @settings_by_category['system']['system.timezone'] %>
        <%= form.select "settings[system.timezone]",
            options_for_select(
              ActiveSupport::TimeZone.all.sort_by(&:utc_offset).map { |tz|
                [tz.to_s, tz.name]
              },
              timezone&.typed_value.to_s
            ),
            { prompt: "タイムゾーンを選択してください" },
            { class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" } %>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          メンテナンスモード
        </label>
        <% maintenance = @settings_by_category['system']['system.maintenance_mode'] %>
        <%= form.select "settings[system.maintenance_mode]",
            options_for_select([
              ['有効', 'true'],
              ['無効', 'false']
            ], maintenance&.typed_value.to_s),
            {},
            { class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" } %>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          新規ユーザー登録
        </label>
        <% user_registration = @settings_by_category['system']['system.allow_user_registration'] %>
        <%= form.select "settings[system.allow_user_registration]",
            options_for_select([
              ['許可', 'true'],
              ['禁止', 'false']
            ], user_registration&.typed_value.to_s),
            {},
            { class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" } %>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          ログレベル
        </label>
        <% log_level = @settings_by_category['system']['system.log_level'] %>
        <%= form.select "settings[system.log_level]",
            options_for_select([
              ['DEBUG', 'debug'],
              ['INFO', 'info'],
              ['WARN', 'warn'],
              ['ERROR', 'error']
            ], log_level&.typed_value.to_s),
            {},
            { class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" } %>
      </div>

    </div>
  </div>
<% end %>